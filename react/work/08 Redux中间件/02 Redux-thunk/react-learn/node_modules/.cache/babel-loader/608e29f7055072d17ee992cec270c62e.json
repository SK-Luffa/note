{"ast":null,"code":"import isPlainObject from \"./utils/isPlainObject\";\nimport ActionTypes from \"./utils/ActionTypes\";\nfunction validateReducers(reducers) {\n  if (typeof reducers !== \"object\") {\n    throw new TypeError(\"reducers must be an object\");\n  }\n  if (!isPlainObject(reducers)) {\n    throw new TypeError(\"reducers must be a plain object\");\n  }\n  //验证reducer的返回结果是不是undefined\n  for (const key in reducers) {\n    if (reducers.hasOwnProperty(key)) {\n      const reducer = reducers[key]; //拿到reducer\n      //传递一个特殊的type值\n      let state = reducer(undefined, {\n        type: ActionTypes.INIT()\n      });\n      if (state === undefined) {\n        throw new TypeError(\"reducers must not return undefined\");\n      }\n      state = reducer(undefined, {\n        type: ActionTypes.UNKNOWN()\n      });\n      if (state === undefined) {\n        throw new TypeError(\"reducers must not return undefined\");\n      }\n    }\n  }\n}\nexport default function (reducers) {\n  //1. 验证\n  validateReducers(reducers);\n  /**\n   * 返回的是一个reducer函数\n   */\n  return function () {\n    let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    let action = arguments.length > 1 ? arguments[1] : undefined;\n    const newState = {}; //要返回的新的状态\n    for (const key in reducers) {\n      if (reducers.hasOwnProperty(key)) {\n        const reducer = reducers[key];\n        newState[key] = reducer(state[key], action);\n      }\n    }\n    return newState; //返回状态\n  };\n}","map":{"version":3,"names":["isPlainObject","ActionTypes","validateReducers","reducers","TypeError","key","hasOwnProperty","reducer","state","undefined","type","INIT","UNKNOWN","action","newState"],"sources":["/Users/dengzixu/Documents/notes/react/work/08 Redux中间件/02 Redux-thunk/react-learn/src/redux/combineReducers.js"],"sourcesContent":["import isPlainObject from \"./utils/isPlainObject\"\nimport ActionTypes from \"./utils/ActionTypes\"\n\nfunction validateReducers(reducers) {\n    if (typeof reducers !== \"object\") {\n        throw new TypeError(\"reducers must be an object\");\n    }\n    if (!isPlainObject(reducers)) {\n        throw new TypeError(\"reducers must be a plain object\");\n    }\n    //验证reducer的返回结果是不是undefined\n    for (const key in reducers) {\n        if (reducers.hasOwnProperty(key)) {\n            const reducer = reducers[key];//拿到reducer\n            //传递一个特殊的type值\n            let state = reducer(undefined, {\n                type: ActionTypes.INIT()\n            })\n            if (state === undefined) {\n                throw new TypeError(\"reducers must not return undefined\");\n            }\n            state = reducer(undefined, {\n                type: ActionTypes.UNKNOWN()\n            })\n            if (state === undefined) {\n                throw new TypeError(\"reducers must not return undefined\");\n            }\n        }\n    }\n}\n\nexport default function (reducers) {\n    //1. 验证\n    validateReducers(reducers);\n    /**\n     * 返回的是一个reducer函数\n     */\n    return function (state = {}, action) {\n        const newState = {}; //要返回的新的状态\n        for (const key in reducers) {\n            if (reducers.hasOwnProperty(key)) {\n                const reducer = reducers[key];\n                newState[key] = reducer(state[key], action);\n            }\n        }\n        return newState; //返回状态\n    }\n}"],"mappings":"AAAA,OAAOA,aAAa,MAAM,uBAAuB;AACjD,OAAOC,WAAW,MAAM,qBAAqB;AAE7C,SAASC,gBAAgB,CAACC,QAAQ,EAAE;EAChC,IAAI,OAAOA,QAAQ,KAAK,QAAQ,EAAE;IAC9B,MAAM,IAAIC,SAAS,CAAC,4BAA4B,CAAC;EACrD;EACA,IAAI,CAACJ,aAAa,CAACG,QAAQ,CAAC,EAAE;IAC1B,MAAM,IAAIC,SAAS,CAAC,iCAAiC,CAAC;EAC1D;EACA;EACA,KAAK,MAAMC,GAAG,IAAIF,QAAQ,EAAE;IACxB,IAAIA,QAAQ,CAACG,cAAc,CAACD,GAAG,CAAC,EAAE;MAC9B,MAAME,OAAO,GAAGJ,QAAQ,CAACE,GAAG,CAAC,CAAC;MAC9B;MACA,IAAIG,KAAK,GAAGD,OAAO,CAACE,SAAS,EAAE;QAC3BC,IAAI,EAAET,WAAW,CAACU,IAAI;MAC1B,CAAC,CAAC;MACF,IAAIH,KAAK,KAAKC,SAAS,EAAE;QACrB,MAAM,IAAIL,SAAS,CAAC,oCAAoC,CAAC;MAC7D;MACAI,KAAK,GAAGD,OAAO,CAACE,SAAS,EAAE;QACvBC,IAAI,EAAET,WAAW,CAACW,OAAO;MAC7B,CAAC,CAAC;MACF,IAAIJ,KAAK,KAAKC,SAAS,EAAE;QACrB,MAAM,IAAIL,SAAS,CAAC,oCAAoC,CAAC;MAC7D;IACJ;EACJ;AACJ;AAEA,eAAe,UAAUD,QAAQ,EAAE;EAC/B;EACAD,gBAAgB,CAACC,QAAQ,CAAC;EAC1B;AACJ;AACA;EACI,OAAO,YAA8B;IAAA,IAApBK,KAAK,uEAAG,CAAC,CAAC;IAAA,IAAEK,MAAM;IAC/B,MAAMC,QAAQ,GAAG,CAAC,CAAC,CAAC,CAAC;IACrB,KAAK,MAAMT,GAAG,IAAIF,QAAQ,EAAE;MACxB,IAAIA,QAAQ,CAACG,cAAc,CAACD,GAAG,CAAC,EAAE;QAC9B,MAAME,OAAO,GAAGJ,QAAQ,CAACE,GAAG,CAAC;QAC7BS,QAAQ,CAACT,GAAG,CAAC,GAAGE,OAAO,CAACC,KAAK,CAACH,GAAG,CAAC,EAAEQ,MAAM,CAAC;MAC/C;IACJ;IACA,OAAOC,QAAQ,CAAC,CAAC;EACrB,CAAC;AACL"},"metadata":{},"sourceType":"module"}